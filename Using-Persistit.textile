h5. This is the documentation for Titan 0.4. <br> Documentation for the latest Titan version is available at "http://s3.thinkaurelius.com/docs/titan/current":http://s3.thinkaurelius.com/docs/titan/current.

<a href="https://github.com/pbeaman/persistit">[[http://akibanblog.s3.amazonaws.com/2012/07/persistit_logo.png|width=150px|align=left|float]]</a>

The "Persistit":https://github.com/pbeaman/persistit storage backend runs in the same JVM as Titan and provides local persistence on a single machine. Hence, the Persistit storage backend requires that all of the graph data fits on the local disk and all of the frequently accessed graph elements fit into main memory. This imposes a practical limitation of graphs with 10-100s million vertices on commodity hardware. However, for graphs of that size the Persistit storage backend exhibits high performance because all data can be accessed locally within the same JVM.

Note, that the Persistit storage backend was first included in Titan 0.4.0 and is considered experimental for now.

<br/>

bq. Akiban Persistit is a fast, transactional, Java B+Tree library available as open source or under a free use license. <br/>
We have worked hard to make Akiban Persistitâ„¢ exceptionally fast, reliable, simple and lightweight. We hope you will enjoy learning more about it and using it.  -- "Persistit Github page":https://github.com/pdbeaman/persistit

h2. Persistit Setup

Since Persistit runs in the same JVM as Titan, connecting the two only requires a simple configuration and no additional setup:

```java
Configuration conf = new BaseConfiguration();
conf.setProperty("storage.directory", "/tmp/graph");
conf.setProperty("storage.backend", "persistit");
TitanGraph graph = TitanFactory.open(conf);
```

h2. Persistit Specific Configuration

In addition to the general "Titan Graph Configuration":Graph-Configuration, there are the following Persistit specific Titan configuration options:

|_. Option |_. Description |_. Value |_. Default |_. Modifiable |
| storage.buffercount | The size of the Persistit internal buffer | >=0 | 5000 | Yes |


h2. Ideal Use Case

The Persistit storage backend is best suited for small to medium size graphs with up to 100 million vertices on commodity hardware. For graphs of that size, it will likely deliver higher performance than the distributed storage backends. Note, that Persitit is also limited in the number of concurrent requests it can handle efficiently because it runs on a single machine. Hence, it is not well suited for applications with many concurrent users mutating the graph, even if that graph is small to medium size.

Since Persitit runs in the same JVM as Titan, this storage backend is ideally suited for unit testing of application code using Titan.

h2. Global Graph Operations

Titan backed by Persitit supports global graph operations such as iterating over all vertices or edges. However, note that such operations need to scan the entire database which can require a significant amount of time for larger graphs. 

In order to not run out of memory, it is advised to disable transactions (@storage.transactions=false@) when iterating over large graphs. Having transactions enabled requires Persitit to acquire read locks on the data it is reading. When iterating over the entire graph, these read locks can easily require more memory than is available.